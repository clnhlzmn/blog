<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Jekyll and pig.js | Colin Holzman</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Jekyll and pig.js" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Photo Gallery" />
<meta property="og:description" content="Photo Gallery" />
<link rel="canonical" href="https://colinholzman.xyz/programming/2019/04/22/Jekyll-and-PIG.html" />
<meta property="og:url" content="https://colinholzman.xyz/programming/2019/04/22/Jekyll-and-PIG.html" />
<meta property="og:site_name" content="Colin Holzman" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-04-22T09:00:00-04:00" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://colinholzman.xyz/programming/2019/04/22/Jekyll-and-PIG.html"},"url":"https://colinholzman.xyz/programming/2019/04/22/Jekyll-and-PIG.html","description":"Photo Gallery","headline":"Jekyll and pig.js","dateModified":"2019-04-22T09:00:00-04:00","datePublished":"2019-04-22T09:00:00-04:00","@type":"BlogPosting","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://colinholzman.xyz/feed.xml" title="Colin Holzman" /></head>
<body><header class="site-header">

    <div class="wrapper"><a class="site-title" rel="author" href="/">Colin Holzman</a><nav class="site-nav">
                <input type="checkbox" id="nav-trigger" class="nav-trigger" />
                <label for="nav-trigger">
                    <span class="menu-icon">
                        <svg viewBox="0 0 18 15" width="18px" height="15px">
                            <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
                        </svg>
                    </span>
                </label>

                <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/gallery/">Gallery</a></div>
            </nav></div>
</header><main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Jekyll and pig.js</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-04-22T09:00:00-04:00" itemprop="datePublished">Apr 22, 2019
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h2 id="photo-gallery">Photo Gallery</h2>

<p>I tried using <a href="https://github.com/ElasticDesigns/jekyll-lens">Jekyll Lens</a> for a photo gallery on <a href="https://colinholzman.xyz">colinholzman.xyz</a>. It worked and was easy to use but was not exactly what I wanted. While looking for a better method I came across <a href="https://chuckleplant.github.io/2018/08/06/pig-img-gallery.html">this</a> post by Sergio Basurco. In it he describes how he modified the <a href="https://github.com/aerobless/jekyll-photo-gallery">Jekyll Photo Gallery</a> plugin to use <a href="https://github.com/schlosser/pig.js">pig.js</a> for loading images. Pig.js is a simple and lightweight JavaScript library to enable progressive loading of images as the user scrolls to them. The <a href="https://feeding.schlosser.io/">example</a> is exactly the effect that I was looking for.</p>

<h2 id="generating-assets">Generating Assets</h2>

<p>Pig.js expects to be able to load various sizes for each image. To do this the we must store the images in a manner that allows the pig.js function <code class="highlighter-rouge">urlForSize</code> to return the path to the image of a given size. I have chosen to store my images like so:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├── assets
│   ├── img
│   │   ├── 20
│   │   |   ├── blue.jpg
│   │   |   ...
│   │   ├── 100
│   │   |   ├── red.jpg
│   │   |   ...
│   │   ├── 250
│   │   |   ├── green.jpg
│   │   |   ...
│   │   ├── 500
│   │   │   ├── blue.jpg
...
</code></pre></div></div>

<p>Since my goal is to display potentially hundreds of images like this I need a tool to resize them all and generate the directory structure above.</p>

<h2 id="gallerybuilder">gallerybuilder</h2>

<p><a href="https://github.com/clnhlzmn/gallerybuilder/blob/master/main.py">gallerybuilder</a> is a simple python script I wrote to take a directory full of photos, resize them all to the sizes required by pig.js, and generate the html for my gallery page. It’s a rough draft for now but it does the trick.</p>

<h2 id="adding-links">Adding links</h2>

<p>One last thing I did to enhance the gallery experience is make each image a link to a full size version. To get the link to the full size image I call <code class="highlighter-rouge">urlForSize</code> with size equal to 1024. Therefore when creating thumbnail images for the assets folder we have to create sizes 20, 100, 250, 500, (for original pig.js) and 1024 (for full size link). You can see the simple change to pig.js <a href="https://github.com/schlosser/pig.js/compare/master...clnhlzmn:master#diff-ded216d1d585dc143459a4bdbbed4626R785">here</a>.</p>

<h2 id="result">Result</h2>

<p>You can see what this looks like on my site <a href="https://colinholzman.xyz/gallery">here</a>. TODO: add a lot more photos.</p>


  </div>

  <div class="just-comments" data-apikey="a50b7eb6-c26f-4728-b3ac-4c68e1db19eb" data-recaptcha="true"></div><script async src="https://just-comments.com/w.js"></script>

  <a class="u-url" href="/programming/2019/04/22/Jekyll-and-PIG.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Colin Holzman</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Colin Holzman</li><li><a class="u-email" href="mailto:colinholzman@protonmail.com">colinholzman@protonmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/clnhlzmn"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">clnhlzmn</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Mostly an experiment in setting up and running a server/blog. I also occasionally think of things to write about so maybe  I&#39;ll do that here.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
