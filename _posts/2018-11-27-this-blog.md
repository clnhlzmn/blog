---
layout: post
title:  "This Blog"
date:   2018-11-27 07:00:00 -0500
categories: meta
---

I built this blog based on tidbits of information found throughout the web. I thought it would be fitting to write down some instructions on how to reproduce it as the first post.

### get a host to serve your site

I used Amazon Lightsail for this. This site is currently running on the cheapest instance I could get (512 MB RAM, 1 vCPU, 20 GB SSD). I am using Debian 8.

### install node.js

Do this in whatever way is typical for your os. I think Amazon has images with node already installed.

### install express, forever, and probably some other things

`npm install express`

### create a file server.js

On my server I keep this file at `$HOME/server/server.js`  
  
Here is my server:

    // Dependencies
    const fs = require('fs');
    const http = require('http');
    const https = require('https');
    const express = require('express');
    
    const app = express();
    
    // Certificate
    const privateKey = fs.readFileSync('/etc/letsencrypt/live/colinholzman.xyz/privkey.pem', 'utf8');
    const certificate = fs.readFileSync('/etc/letsencrypt/live/colinholzman.xyz/cert.pem', 'utf8');
    const ca = fs.readFileSync('/etc/letsencrypt/live/colinholzman.xyz/chain.pem', 'utf8');
    
    const credentials = {
        key: privateKey,
        cert: certificate,
        ca: ca
    };
    
    app.use(express.static('/home/admin/site'))
    
    //app.use((req, res) => {
        //res.send('Hello there !');
    //});
    
    // Starting both http & https servers
    //const httpServer = http.createServer(app);
    const httpsServer = https.createServer(credentials, app);
    
    httpsServer.listen(443, () => {
        //console.log('HTTPS Server running on port 443');
    });

If you uncomment the `httpServer = http.createServer(app);` line and add `httpServer.listen(80);` then run with `sudo forever start /path/to/server.js` this will serve whatever content is at `/home/admin/site` over http. We want to use https though!

### TODO: lets encrypt

### TODO: jekyll

